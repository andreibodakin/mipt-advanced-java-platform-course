
# üß© –õ–µ–∫—Ü–∏—è 4 - –î–∂–µ–Ω–µ—Ä–∏–∫–∏ –≤ Java

### 1. **–°–∏–Ω—Ç–∞–∫—Å–∏—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**
```java
List<String> list = new ArrayList<>(); // Diamond operator (Java 7+)
```
‚Üí –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤ —Å–ø–∏—Å–æ–∫ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å **—Ç–æ–ª—å–∫–æ `String`**, –∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ ‚Äî **–Ω–µ –Ω—É–∂–µ–Ω –∫–∞—Å—Ç**.

---

### 2. **–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤: `Object[]` ‚Äî –Ω–µ–±–µ–∑–æ–ø–∞—Å–µ–Ω**
```java
Object[] objects = new Integer[10]; // –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è!
objects[0] = "543";                 // Runtime: ArrayStoreException!
```
‚Üí **–û—à–∏–±–∫–∞ —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ** ‚Üí –Ω–∞—Ä—É—à–µ–Ω–∏–µ type safety.

> üí° **–ò–¥–µ—è –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤**: –µ—Å–ª–∏ –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è ‚Äî **–Ω–∏–∫–∞–∫–∏—Ö `ClassCastException` –∏–ª–∏ `ArrayStoreException` –≤ —Ä–∞–Ω—Ç–∞–π–º–µ –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ**.

---

### 3. **Type Erasure (—Å—Ç–∏—Ä–∞–Ω–∏–µ —Ç–∏–ø–æ–≤)**
- –î–∂–µ–Ω–µ—Ä–∏–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç **—Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**.
- –í –±–∞–π—Ç-–∫–æ–¥–µ: `List<String>` ‚Üí `List` (raw type), –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî —Å `Object`.
- **–ò—Å–∫–ª—é—á–µ–Ω–∏–µ**: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∂–µ–Ω–µ—Ä–∏–∫–∞—Ö —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ **—Å–∏–≥–Ω–∞—Ç—É—Ä–∞—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ –∫–ª–∞—Å—Å–æ–≤** (—á–µ—Ä–µ–∑ `Signature` –∞—Ç—Ä–∏–±—É—Ç) ‚Üí –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ Reflection.

> ‚ö†Ô∏è –ü–æ—ç—Ç–æ–º—É **–Ω–µ–ª—å–∑—è**:
> - –°–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤ –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤: `new T[]`
> - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø –≤ —Ä–∞–Ω—Ç–∞–π–º–µ: `if (list instanceof List<String>)` ‚Üí –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

---

### 4. **–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤**
```java
List<Object> list = new ArrayList<Integer>(); // ‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
```
‚Üí –î–∞–∂–µ –µ—Å–ª–∏ `Integer` ‚Äî –ø–æ–¥—Ç–∏–ø `Object`, `List<Integer>` **–Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–∏–ø–æ–º** `List<Object>`.

> –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å**: `List<A>` –∏ `List<B>` –Ω–µ —Å–≤—è–∑–∞–Ω—ã, –¥–∞–∂–µ –µ—Å–ª–∏ `A extends B`.

---

### 5. **Wildcards: `? extends` –∏ `? super`**

#### ‚úÖ `? extends T` ‚Äî **Producer** (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ)
```java
List<? extends Number> list = new ArrayList<Integer>();
Number n = list.get(0); // ‚úÖ OK
list.add(42);           // ‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ! (–º–æ–∂–µ—Ç –±—ã—Ç—å List<Double>)
list.add(null);         // ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

#### ‚úÖ `? super T` ‚Äî **Consumer** (—Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å)
```java
List<? super Integer> list = new ArrayList<Number>();
list.add(42);     // ‚úÖ OK
Number n = list.get(0); // ‚ùå –¢–∏–ø Object ‚Äî –Ω–µ –∑–Ω–∞–µ–º —Ç–æ—á–Ω—ã–π —Ç–∏–ø
```

#### üìå **PECS (Producer Extends, Consumer Super)**
- –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç **–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç** –∑–Ω–∞—á–µ–Ω–∏—è (producer) ‚Üí `? extends T`
- –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç **–ø—Ä–∏–Ω–∏–º–∞–µ—Ç** –∑–Ω–∞—á–µ–Ω–∏—è (consumer) ‚Üí `? super T`
- –ï—Å–ª–∏ –∏ —Ç–æ, –∏ –¥—Ä—É–≥–æ–µ ‚Üí **–±–µ–∑ wildcard**, –ø—Ä–æ—Å—Ç–æ `T`

---

### 6. **–û–±—ä—è–≤–ª–µ–Ω–∏–µ –¥–∂–µ–Ω–µ—Ä–∏–∫–æ–≤**

#### –ù–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Å–∞:
```java
public interface List<E> { ... }
public class Box<T> { ... }
```

#### –ù–∞ —É—Ä–æ–≤–Ω–µ –º–µ—Ç–æ–¥–∞:
```java
public static <E> E max(List<E> list, Comparator<E> comparator) { ... }
```

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (bounds):
- `E extends Comparable<E>` ‚Äî –≤–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ (—Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–∏–ø—ã `Comparable`)
- `E super SomeClass` ‚Äî **–Ω–µ–ª—å–∑—è** –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Ç–∏–ø–∞!  
  ‚Üí `super` —Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –≤ wildcards**: `List<? super Number>`

> ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:  
> ```java
> public static <E extends Comparable<? super E>> E max(List<E> list)
> ```
> ‚Üí –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å `E`, –¥–∞–∂–µ –µ—Å–ª–∏ `compareTo` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —Ä–æ–¥–∏—Ç–µ–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `LocalDateTime` –Ω–∞—Å–ª–µ–¥—É–µ—Ç `Comparable<ChronoLocalDateTime>`).

---

### 7. **–°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∏–º–µ–Ω–∞–º —Ç–∏–ø–æ–≤**
- `E` ‚Äî Element (–≤ –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö)
- `K` ‚Äî Key
- `V` ‚Äî Value
- `T` ‚Äî Type
- `R` ‚Äî Return type
- `S`, `U`, `V` ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã

---

### 8. **–ü—Ä–∏–º–µ—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è**

| –í—ã—Ä–∞–∂–µ–Ω–∏–µ | –ú–æ–∂–Ω–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å | –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å | –ú–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–∞–∫ |
|----------|------------------|----------------|----------------------|
| `List<Number>` | —Ç–æ–ª—å–∫–æ `List<Number>` | `Number` –∏ –ø–æ–¥—Ç–∏–ø—ã | `Number` |
| `List<? extends Number>` | `List<Integer>`, `List<Double>` | —Ç–æ–ª—å–∫–æ `null` | `Number` |
| `List<? super Number>` | `List<Number>`, `List<Object>` | `Number` –∏ –ø–æ–¥—Ç–∏–ø—ã | `Object` |
| `List<?>` | –ª—é–±–æ–π `List` | —Ç–æ–ª—å–∫–æ `null` | `Object` |

---

### 9. **–í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å**
- **Raw types (`List`) ‚Äî –∏–∑–±–µ–≥–∞—Ç—å!** –û–Ω–∏ –æ—Ç–∫–ª—é—á–∞—é—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤.
- **–î–∂–µ–Ω–µ—Ä–∏–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π `List<Integer>`, –∞ –Ω–µ `List<int>`.
- **–ú–∞—Å—Å–∏–≤—ã –∏ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã** ‚Üí –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
